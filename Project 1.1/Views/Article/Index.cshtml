@model Project_1._1.Models.ArticlesListViewModel
@using PagedList.Mvc;
@using Project_1._1.Models
<link href="~/Content/PagedList.css" rel="stylesheet" type="text/css" />
@{
    ViewBag.Title = "Статьи";
}

<h2>Статьи</h2>
@{
    int i = 1;
}
<div class="panel-group jumbotron" id="accordion">



    <form method="get" class="form-group">
        <div class="container ">
            <div class="row">
                <div class="col-md-3 " style="padding-left:0px;">
                    <label class="control-label">Категории: </label>
                    @Html.DropDownList("category", Model.Categorys as SelectList,
                         htmlAttributes: new { @class = "form-control" })
                </div>
                <div class="col-md-3">
                    <label class="control-label">Дата публикации: </label>
                    @Html.TextBox("Date", Model.Date as string,
                        htmlAttributes: new { @class = "form-control", type = "date" })
                </div>
                <div class="col-md-3">
                    <label class="control-label">Теги:</label>
                    @Html.Editor("selectedTags", new { htmlAttributes = new { @class = "form-control" } })
                </div>
                <div class="col-md-3"><input type="submit" value="Фильтр" class="btn btn-default" style="margin-top:25px;" /></div>
            </div>
        </div>
    </form>

    @foreach (var item in Model.PagedArticle)
    {
        string collap = "#collapse";
        string colla = "collapse";
        string artic = "article";
        collap = collap + i;
        colla = colla + i;
        artic = artic + i;
        <div class="panel panel-default" id=@artic>
            <div class="panel-heading">
                <h4 class="panel-title">
                    <a data-toggle="collapse" data-parent="#accordion" href=@collap>@Html.DisplayFor(modelItem => item.Name)</a>
                </h4>
            </div>
            <div id=@colla class="panel-collapse collapse ">
                <div class="panel-body">
                    @Html.Raw(item.ShortDescription)
                    @Html.ActionLink("Просмотреть всю статью", "Article", new { id = item.Id })
                </div>
            </div>
        </div>
        i++;
    }
</div>
<div class="text-center">
    @Html.PagedListPager(Model.PagedArticle, x => Url.Action("Index", new { page = x, category = Session["category"], date = Session["date"], selectedTags = (string)Session["selectedTags"] }))
</div>